# 框架答题

## 1.虚拟DOM

是什么？为什么用它？如何实现？

1. 虚拟DOM其实就是真实DOM节点的抽象，使用JS对象对DOM节点进行一 一映射，这个JS对象可以保存节点的一些属性。
2. 如果DOM节点过多，那么原生操作DOM是一件很费性能而且很麻烦的事情，而操作虚拟DOM就和JS操作对象一样更加方便逻辑更加简洁，而且虚拟DOM的出现可以实现跨平台应用，如小程序之类。
3. 在react中虚拟DOM是通过JSX语法调用了createElement进行转化成的JS对象。

## 2.Diff算法

旧的diff问题？新diff三个策略？

1. 原diff算法其实就是通过递归调用的方式来进行dom树的更新，但是这种方式时间复杂度是O(n^3) ，性能很差。
2. 新的diff算法将时间复杂度降到了O(n)。
3. 新diff算法的策略是对tree diff、component diff和element diff进行算法优化。
4. tree diff：因为DOM树跨层级的移动操作很少出现，因此可以只比较同层节点的变化，发现变化后，就会连同所有的子节点一起删除。
5. component diff：某个组件发生变化，如果为同一类型，可以根据shouldComponentUpdata()判断是否更新，不为同一类型就直接替换整个组件。
6. element diff：所有同一层的子节点，通过key来区分，如果没有key来表示当需要节点移动时就需要删除节点再插入节点，有了key就只需要移动而不用重新创建。

## 3.Fiber架构

1. fiber的出现主要是因为之前的调度器是stack reconciler，它是通过递归的方式生成新的dom树，这种方式会很浪费性能和花费时间，而且会容易造成卡顿。因为JS线程会一直占用主线程，而在一帧也就是16ms内，浏览器需要完成交互到渲染等一系列工作，不然就会有卡顿的体验。
2. 而fiber reconciler可以将渲染更新的工作进行时间分片，每次只完成一部分后就交还给主线程，等主线程完成后再进行下一批更新任务。

## 4.高阶组件HOC

1. HOC是一种React的进阶使用方法，它是一能接受一个组件为参数，返回一个经过增加的组件的方法。
2. HOC能够实现组件复用，渲染劫持操作state，props增删改。
3. 它有两种使用方法：1.属性代理，通过对包裹组件的props修改再传递给参数组件。2.反向继承，返回的组件继承包裹组件。

## 5. 合成事件

1. react的合成事件是react模拟原生DOM事件所有能力的一个事件对象。
2. 它采用的是顶层事件代理机制，它可以对浏览器进行兼容，实现更好的跨平台。
3. 而且react还引入了事件池的机制，当事件被执行后不是被释放掉而是放进一个数组中，再用时就被调用，避免了频繁去创建和销毁。
4. 原生与合成事件的区别：命名、处理函数写法、阻止默认行为方式**（false和preventDefault）**
5. 因为合成事件以事件委托的方式绑定在组件最上层，在组件卸载阶段自动销毁绑定事件。所以执行顺序是原生事件-->合成事件-->document事件。
6. 合成事件组织冒泡可以使用**e.stopPropagation()**或**e.preventDefault()**

## 6.性能优化

1. PureComponent/ShouldComponentUpdate
   1. PureComponent 会对 props 与 state 做**浅比较，**所以一定要保证 props 与 state 中的数据是 immutable 的**。**
   2. 如果你的数据不是 immutable 的，或许你可以自己手动通过 ShouldComponentUpdate 来进行深比较。当然深比较的性能一般都不好，不到万不得已，最好不要这样做。
2. React.memo 与 PureComponent 一样，但它是为函数组件服务的。React.memo 会对 props 进行**浅比较**，如果一致，则不会再执行了。

## 7.Redux

## 8.Redux中间件

## 9.react-redux

































